---
layout: post
title:  "cisco ucs imc sdk"
date:   2020-04-06 23:00:00 +0800
categories: Python
tags: Linux-Tool
excerpt: cisco ucs imc sdk
mathjax: true
typora-root-url: ../
---

# Cisco UCS IMC sdk

æœ€è¿‘æœ‰ä¸€å †æ–°hypervisorè¦åŠ ï¼Œä¹‹å‰compute teamä¼šæ‰‹å·¥åšä¸€äº›äº‹æƒ…ï¼Œæˆ‘ä»¬æƒ³è¦æŠŠè¿™äº›äº‹æƒ…è‡ªåŠ¨åŒ–ï¼Œå¯ä»¥ç”¨imcsdkæ¥åš

æ¯”å¦‚æˆ‘ä»¬éœ€è¦hard reset hypervisor

ä¿®æ”¹ä¸Šè”uplink port

è®¾ç½®ç½‘å£vlan

è®¾ç½®ethçš„interrupt, queueç­‰

ğŸ‘‡[2]é‡Œçš„ä»£ç æ˜¯å¯ä»¥ç›´æ¥å‚è€ƒçš„ï¼Œ[1]åˆ™æ˜¯ç›¸å…³çš„æ–‡æ¡£

# Login

ç¬¬ä¸€æ­¥ï¼Œé¦–å…ˆæ˜¯éœ€è¦è®¤è¯å¹¶ä¸”login

```python
from imcsdk.imchandle import ImcHandle

cimc = "ci22tacmp570-cimc.webex.com"
handle = ImcHandle(cimc, "admin", "******")
handle.login()
handle.logout()
```

# API

APIæ˜¯åŸºäºå¯¹è±¡çš„ï¼Œsdkå¯ä»¥å¯¹APIå¯¹è±¡è¿›è¡ŒCRUDæ“ä½œ

- **C**reate an object - `add_mo`
- **R**etrieve an object - `query_dn`ï¼ˆDistinguished Name (DN)ï¼‰,`query_classid`
- **U**pdate an object - `set_mo`
- **D**elete an object - `delete_mo`

å¯ä»¥é€šè¿‡ä¸Šé¢çš„ImcHandleæ¥è°ƒç”¨è¿™äº›æ–¹æ³•

å…¶å®ä¹Ÿä¸éº»çƒ¦ï¼Œæ‰¾åˆ°å¯¹åº”çš„objectï¼Œæ”¹ä¹‹å³å¯

ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚hard reset

```python
from imcsdk.imchandle import ImcHandle

cimc = "ci22tacmp570-cimc.webex.com"
handle = ImcHandle(cimc, "admin", "******")

handle.login()

mo = handle.query_classid(class_id="ComputeRackUnit")[0]
mo.admin_power = "hard-reset-immediate"
handle.set_mo(mo)
handle.logout()
```

å¯ä»¥æŸ¥æ‰¾æ–‡ä»¶

```python
This module contains the general information for ComputeRackUnit ManagedObject.

class imcsdk.mometa.compute.ComputeRackUnit.ComputeRackUnit(parent_mo_or_dn, server_id, **kwargs)[source]
Bases: imcsdk.imcmo.ManagedObject

This is ComputeRackUnit class.

consts = <imcsdk.mometa.compute.ComputeRackUnit.ComputeRackUnitConsts instance>
```

å±æ€§å€¼çš„å®šä¹‰éƒ½åœ¨*ComputeRackUnitConsts*é‡Œï¼Œæ¯”å¦‚åˆšåˆšæˆ‘ä»¬è®¾ç½®çš„admin_powerçš„å€¼å¯ä»¥ä»ä¸‹é¢æ‰¾åˆ°

```python
class ComputeRackUnitConsts:
    ADMIN_POWER_BMC_RESET_DEFAULT = "bmc-reset-default"
    ADMIN_POWER_BMC_RESET_IMMEDIATE = "bmc-reset-immediate"
    ADMIN_POWER_CMOS_RESET_IMMEDIATE = "cmos-reset-immediate"
    ADMIN_POWER_CYCLE_IMMEDIATE = "cycle-immediate"
    ADMIN_POWER_DIAGNOSTIC_INTERRUPT = "diagnostic-interrupt"
    ADMIN_POWER_DOWN = "down"
    ADMIN_POWER_HARD_RESET_IMMEDIATE = "hard-reset-immediate"
    ADMIN_POWER_POLICY = "policy"
    ADMIN_POWER_SOFT_SHUT_DOWN = "soft-shut-down"
    ADMIN_POWER_UP = "up"
    MEMORY_SPEED_ = ""
    MEMORY_SPEED_UNSPECIFIED = "unspecified"
    OPER_POWER_DEGRADED = "degraded"
    OPER_POWER_ERROR = "error"
    OPER_POWER_NOT_SUPPORTED = "not-supported"
    OPER_POWER_OFF = "off"
    OPER_POWER_OFFDUTY = "offduty"
    OPER_POWER_OFFLINE = "offline"
    OPER_POWER_ON = "on"
    OPER_POWER_ONLINE = "online"
    OPER_POWER_POWER_SAVE = "power-save"
    OPER_POWER_TEST = "test"
    OPER_POWER_UNKNOWN = "unknown"
    PRESENCE_EMPTY = "empty"
    PRESENCE_EQUIPPED = "equipped"
    PRESENCE_EQUIPPED_IDENTITY_UNESTABLISHABLE = "equipped-identity-unestablishable"
    PRESENCE_EQUIPPED_NOT_PRIMARY = "equipped-not-primary"
    PRESENCE_EQUIPPED_WITH_MALFORMED_FRU = "equipped-with-malformed-fru"
    PRESENCE_INACCESSIBLE = "inaccessible"
    PRESENCE_MISMATCH = "mismatch"
    PRESENCE_MISMATCH_IDENTITY_UNESTABLISHABLE = "mismatch-identity-unestablishable"
    PRESENCE_MISSING = "missing"
    PRESENCE_UNAUTHORIZED = "unauthorized"
    PRESENCE_UNKNOWN = "unknown"
```

# References

[1] [https://ciscoucs.github.io/imcsdk_docs/imcsdk.html](https://ciscoucs.github.io/imcsdk_docs/imcsdk.html)

[2] [https://github.com/CiscoUcs/imcsdk](https://github.com/CiscoUcs/imcsdk)

